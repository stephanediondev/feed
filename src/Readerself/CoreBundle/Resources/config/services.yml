services:
    simplepie:
        class: SimplePie

    #controller
    readerself_core_controller_abstract:
        class: Readerself\CoreBundle\Controller\AbstractController
        abstract: true
        calls:
            - [ "setContainer", [ "@service_container" ] ]

    readerself_core_controller_setting:
        class: Readerself\CoreBundle\Controller\SettingController
        parent: "readerself_core_controller_abstract"

    readerself_core_controller_feed:
        class: Readerself\CoreBundle\Controller\FeedController
        parent: "readerself_core_controller_abstract"
        arguments:
            - "@readerself_core_manager_feed"

    readerself_core_controller_item:
        class: Readerself\CoreBundle\Controller\ItemController
        parent: "readerself_core_controller_abstract"
        arguments:
            - "@readerself_core_manager_item"
            - "@readerself_core_manager_item_category"
            - "@readerself_core_manager_enclosure"

    readerself_core_controller_push:
        class: Readerself\CoreBundle\Controller\PushController
        parent: "readerself_core_controller_abstract"
        arguments:
            - "@readerself_core_manager_push"
            - "@readerself_core_manager_member"

    #manager
    readerself_core_manager_abstract:
        class: Readerself\CoreBundle\Manager\AbstractManager
        abstract: true
        calls:
            - [ "setEntityManager", [ "@doctrine.orm.entity_manager" ] ]
            - [ "setEventDispatcher", [ "@event_dispatcher" ] ]

    readerself_core_manager_collection:
        class: Readerself\CoreBundle\Manager\CollectionManager
        parent: "readerself_core_manager_abstract"
        public: true
        arguments:
            - "@simplepie"
            - "@readerself_core_manager_push"

    readerself_core_manager_feed:
        class: Readerself\CoreBundle\Manager\FeedManager
        parent: "readerself_core_manager_abstract"
        public: true

    readerself_core_manager_item:
        class: Readerself\CoreBundle\Manager\ItemManager
        parent: "readerself_core_manager_abstract"
        public: true

    readerself_core_manager_item_category:
        class: Readerself\CoreBundle\Manager\ItemCategoryManager
        parent: "readerself_core_manager_abstract"
        public: true

    readerself_core_manager_enclosure:
        class: Readerself\CoreBundle\Manager\EnclosureManager
        parent: "readerself_core_manager_abstract"
        public: true

    readerself_core_manager_member:
        class: Readerself\CoreBundle\Manager\MemberManager
        parent: "readerself_core_manager_abstract"
        public: true

    readerself_core_manager_push:
        class: Readerself\CoreBundle\Manager\PushManager
        parent: "readerself_core_manager_abstract"
        public: true
        arguments:
            - "%android_gcm_api_key%"
